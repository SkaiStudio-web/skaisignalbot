import React,{useState} from 'react'; import axios from 'axios'; export default function UploadChat(){ const [file,setFile]=useState(null); const [ocr,setOcr]=useState(''); const [balance,setBalance]=useState(100); const [minLot,setMinLot]=useState(0.1); const [result,setResult]=useState(null); async function analyze(){ if(!file && !ocr) return alert('Upload or paste OCR'); const fd=new FormData(); if(file) fd.append('image',file); fd.append('ocrText',ocr); fd.append('balance',String(balance)); fd.append('minLot',String(minLot)); try{ const res=await axios.post('/api/analyze',fd,{headers:{'Content-Type':'multipart/form-data'}}); setResult(res.data);}catch(err){ alert(err?.response?.data?.error||err.message);} } return (<div><div style={{marginBottom:8}}><label>Balance</label><input value={balance} onChange={e=>setBalance(e.target.value)} style={{marginLeft:8}}/></div><div><input type='file' accept='image/*' onChange={e=>setFile(e.target.files[0])}/></div><div style={{marginTop:8}}><textarea value={ocr} onChange={e=>setOcr(e.target.value)} placeholder='Or paste OCR here' style={{width:'100%',minHeight:120}}/></div><div style={{marginTop:8}}><button onClick={analyze} style={{padding:8,background:'#06b6d4',border:0}}>Analyze</button></div>{result&&(<div style={{marginTop:12,background:'#021524',padding:8}}><pre style={{whiteSpace:'pre-wrap'}}>{JSON.stringify(result,null,2)}</pre></div>)}</div>); }